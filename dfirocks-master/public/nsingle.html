<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/single-0.2.css">
    <link href="https://fonts.googleapis.com/css2?family=Alata&display=swap" rel="stylesheet">
    <!-- <link rel="stylesheet" href="css/gallery.css"> -->
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <title>单个模型展示网页</title>
</head>
<body>
    <div class="navi">
		<div class="text-block">
      <p class="nav-back"><span class="fas fa-arrow-left"></span> 返回上步</p>
      <img class="logo" src="./images/about-icon/AI.png">
			<a class="home" href="index.html">太一智能参数化设计系统</a>
			<img class="icon-user" src="images/user.svg">
		</div>
    </div>
    <div class="tog-more">
        <img class="back" src="images/arrow1.svg">
        <p>更多详情</p>
    </div>
    <div class="detail">
        <h2>可能还会喜欢</h2>
        <div class="recom-group">
            <div class="recom" style="background-image: url(./images/Ring_0.png);"></div>
            <span>推荐一</span>
        </div>
        <div class="recom-group">
            <div class="recom" style="background-image: url(./images/Ring_1.png);"></div>
            <span>推荐二</span>
        </div>
        <div class="recom-group">
            <div class="recom" style="background-image: url(./images/Ring_2.png);"></div>
            <span>推荐三</span>
        </div>
        <h2>3 评论</h2>
        <ul class="comment-list">
            <li class="comment">
                <div class="vcard bio">
                    <img src="images/person_1.jpg" alt="Image placeholder">
                </div>
                <div class="comment-body">
                    <h3>阿布</h3>
                    <div class="meta">July 26, 2020 at 04:00pm</div>
                    <p>很简单的款式但却有着不错的设计感，戒指整体配色非常新颖，整体属于明亮色调，是非常适合年轻人佩戴的款式。</p>
                </div>
            </li>

            <li class="comment">
                <div class="vcard bio">
                    <img src="images/person_2.jpg" alt="Image placeholder">
                </div>
                <div class="comment-body">
                    <h3>李雷</h3>
                    <div class="meta">July 29, 2020 at 07:27pm</div>
                    <p>从网页上看上去非常不错，这种戒指大方利落，颜色搭配也很有意思。不过我想知道3D打印的实物真的效果如同我看到的这样吗？</p>
                </div>

                <ul class="children">
                    <li class="comment">
                        <div class="vcard bio">
                            <img src="images/person_1.jpg" alt="Image placeholder">
                        </div>
                        <div class="comment-body">
                            <h3>阿布</h3>
                            <div class="meta">July 29, 2020 at 10:40pm</div>
                            <p>嘿，李雷老兄。我前几天刚3D打印了这款戒指，实物真的如同在网页上看到的这样，颜色非常漂亮，而且出人意料的有不错的质感。强烈推荐打印一款试试，你肯定不会后悔的。</p>
    
                        </div>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="scene"></div>
    <div class="mov-box" style="margin-top: 280px; margin-left: 100px;">
      <svg xmlns="http://www.w3.org/2000/svg" class="gen" width="160" height="416" viewBox="0 0 160 416">
        <g id="group_1" data-name="group 1" transform="translate(-288 -190)">
          <g id="ellipse_1" data-name="ellipse 1" transform="translate(339 190)" fill="none" stroke="#ccc" stroke-width="3">
          <circle cx="19.5" cy="19.5" r="19.5" stroke="none"/>
          <circle cx="19.5" cy="19.5" r="18" fill="none"/>
          </g>
          <line id="line_2" data-name="line 2" y2="118" transform="translate(358.5 341.5)" fill="none" stroke="#1d1d1d" stroke-width="3" stroke-dasharray="4 4"/>
          <line id="line_3" data-name="line 3" y2="118" transform="translate(358.5 468.5)" fill="none" stroke="#1d1d1d" stroke-width="3" stroke-dasharray="4"/>
          <g id="ellipse_2" data-name="ellipse 2" transform="translate(347 198)" fill="#ccc" stroke="#ccc" stroke-width="3">
          <circle cx="11.5" cy="11.5" r="11.5" stroke="none"/>
          <circle cx="11.5" cy="11.5" r="10" fill="none"/>
          </g>
          <g id="ellipse_3" data-name="ellipse 3" transform="translate(347 321)" fill="#f1c228" stroke="#f1c228" stroke-width="3">
          <circle cx="11.5" cy="11.5" r="11.5" stroke="none"/>
          <circle cx="11.5" cy="11.5" r="10" fill="none"/>
          </g>
          <g id="ellipse_4" data-name="ellipse 4" transform="translate(347 456)" fill="1d1d1d" stroke="#1d1d1d" stroke-width="3">
          <circle cx="11.5" cy="11.5" r="11.5" stroke="none"/>
          <circle cx="11.5" cy="11.5" r="10" fill="none"/>
          </g>
          <g id="ellipse_5" data-name="ellipse 5" transform="translate(347 583)" fill="1d1d1d" stroke="#1d1d1d" stroke-width="3">
          <circle cx="11.5" cy="11.5" r="11.5" stroke="none"/>
          <circle cx="11.5" cy="11.5" r="10" fill="none"/>
          </g>
          <line id="line_1" data-name="line 1" y2="93" transform="translate(358.5 229.5)" fill="none" stroke="#ccc" stroke-width="3"/>
          <text id="GEN_-_I" data-name="GEN - I" transform="translate(383 340)" fill="#f1c228" font-size="16" font-family="Alata, sans-serif" font-weight="700"><tspan x="0" y="0">GEN - I</tspan></text>
          <text id="GEN_-_II" data-name="GEN - II" transform="translate(383 475)" fill="#1d1d1d" font-size="16" font-family="Alata, sans-serif" font-weight="700"><tspan x="0" y="0">GEN - II</tspan></text>
          <text id="GEN_-_III" data-name="GEN - III" transform="translate(383 602)" fill="#1d1d1d" font-size="16" font-family="Alata, sans-serif" font-weight="700"><tspan x="0" y="0">GEN - III</tspan></text>
          <text id="_5_16" data-name="5/16" transform="translate(288 340)" fill="#f1c228" font-size="16" font-family="Alata, sans-serif" font-weight="700"><tspan x="0" y="0">16/16</tspan></text>
          <text id="_0_0" data-name="0/0" transform="translate(290 475)" fill="#1d1d1d" font-size="16" font-family="Alata, sans-serif" font-weight="700"><tspan x="0" y="0">0/0</tspan></text>
          <text id="_0_0-2" data-name="0/0" transform="translate(290 602)" fill="#1d1d1d" font-size="16" font-family="Alata, sans-serif" font-weight="700"><tspan x="0" y="0">0/0</tspan></text>
          <text id="_1_1" data-name="1/1" transform="translate(307 217)" fill="#ccc" font-size="16" font-family="Alata, sans-serif" font-weight="700"><tspan x="0" y="0">1/1</tspan></text>
        </g>
          </svg>
    </div>
    <div class='popup'>
        <a class="close-btn" >&times;</a>
        <h3 class="notice-title" >确认选择</h3>
        <a class="notice">是否要将所选设计进行遗传进化</a>
        <img href="#" class="yes" src="images/ok-sign.svg" >
        <img href="#" class="no" src="images/remove-sign.svg" >
    </div>
    <a class="bg-popup"></a>
    <svg class="prev" xmlns="http://www.w3.org/2000/svg" width="40.502" height="12.612" viewBox="0 0 40.502 12.612">
        <path id="path_1" data-name="path 1" d="M187,366l19.5,11.6L227,366" transform="translate(-186.744 -365.565)" fill="none" stroke="#c8c8c8" stroke-linecap="round" stroke-width="2"/>
      </svg>
    <svg class="next" xmlns="http://www.w3.org/2000/svg" width="40.502" height="12.612" viewBox="0 0 40.502 12.612">
        <path id="path_1" data-name="path 1" d="M187,366l19.5,11.6L227,366" transform="translate(-186.744 -365.565)" fill="none" stroke="#c8c8c8" stroke-linecap="round" stroke-width="2"/>
      </svg>
    <svg class="dot-bar" xmlns="http://www.w3.org/2000/svg" width="812" height="32" viewBox="0 0 812 32">
        <g class="group_1" id="Group_1" data-name="Group 1" transform="translate(299 -234)">
          <g id="Ellipse_1-1" data-name="Ellipse 1" transform="translate(-299 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-2" data-name="Ellipse 1" transform="translate(-247 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-3" data-name="Ellipse 1" transform="translate(-195 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-4" data-name="Ellipse 1" transform="translate(-143 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-5" data-name="Ellipse 1" transform="translate(-91 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-6" data-name="Ellipse 1" transform="translate(-39 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-7" data-name="Ellipse 1" transform="translate(13 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-8" data-name="Ellipse 1" transform="translate(65 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-9" data-name="Ellipse 1" transform="translate(117 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-10" data-name="Ellipse 1" transform="translate(169 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-11" data-name="Ellipse 1" transform="translate(221 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-12" data-name="Ellipse 1" transform="translate(273 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-13" data-name="Ellipse 1" transform="translate(325 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-14" data-name="Ellipse 1" transform="translate(377 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-15" data-name="Ellipse 1" transform="translate(429 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
          <g id="Ellipse_1-16" data-name="Ellipse 1" transform="translate(481 234)" fill="none" stroke="#fff" opacity="0.5" stroke-width="2">
            <circle cx="16" cy="16" r="16" stroke="none"/>
            <circle cx="16" cy="16" r="15.5" fill="none"/>
          </g>
        </g>
      </svg>
    <div id="tag-bar"></div>

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-migrate-3.0.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.stellar.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/jquery.animateNumber.min.js"></script>
    <script src="js/scrollax.min.js"></script>
    <!-- <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script> -->
    <!-- <script src="js/google-map.js"></script> -->
    <script src="js/main.js"></script>


    <script src='js/three/build/three.min.js'></script>
    <script>
        var i;
        var gen;
        title_change();
        function title_change() {
            const url = window.location.href;
            i = url.split('i=pos').pop();
            console.log(i);
            i ++;      
            $('title').text('#'+ i +' Ring');
            $('h5').text('#'+ i +' Ring');
        }

        function goBack() {
            window.location.href = "../mul-display/index-0.2.1-gen3.html";
        }

        //显示评论
        $('div.tog-more').click(function(){
            $('div.detail').toggleClass('show');
            $('div.tog-more').toggleClass('show');
            $('img.back').toggleClass('show');
        })


        //弹窗控制
        $('a.close-btn').click(function(){
        $('div.popup').removeClass('open');
        $('a.bg-popup').removeClass('open');
        })

        $('img.no').click(function(){
        $('div.popup').removeClass('open');
        $('a.bg-popup').removeClass('open');
        })

        	//nav-back
          
          
        
          $('p.nav-back').click(function(){
            window.location.href = "gallery.html";
          })
	      

        //back gen
        $('svg.gen g #ellipse_5').click(function(){
        $('a.notice').text("是否要返回遗传进化第三代的设计页面？");
        $('div.popup').toggleClass('open');
        $('a.bg-popup').toggleClass('open');
        $('img.yes').click(function(){
            window.location.href = "gallery-ngen3.html";
        })
        });

        $('svg.gen g #ellipse_4').click(function(){
        $('a.notice').text("是否要返回遗传进化第二代的设计页面？");
        $('div.popup').toggleClass('open');
        $('a.bg-popup').toggleClass('open');
        $('img.yes').click(function(){
            window.location.href = "gallery-ngen2.html";
        })
        });

        $('svg.gen g #ellipse_3').click(function(){
        $('a.notice').text("是否要返回遗传进化第一代的设计页面？");
        $('div.popup').toggleClass('open');
        $('a.bg-popup').toggleClass('open');
        $('img.yes').click(function(){
            window.location.href = "gallery.html";
        })
        });

        //切换模型
        $('svg.next').click(function(){
            if(i<16){
                window.location.href = "nsingle.html?i=pos" + i;
            }
        })

        $('svg.prev').click(function(){
            if(i>1){
                i = i-2;
                window.location.href = "nsingle.html?i=pos" + i;
            }
        })

        //加载tag
        var j=i-1;
        $('#tag-bar').load('gallery.html .dict:eq('+j+')');

        //底部进度条
        $('svg.dot-bar g:eq('+i+')').css({'fill':'#f1c228','stroke':'#f1c228','opacity':'1'})


    </script>
    <script type="module">    
    import * as THREE from './js/three/build/three.module.js';

    import { GUI } from './js/three/examples/jsm/libs/dat.gui.module.js';  
    // import Stats from './js/three/examples/jsm/stats.module.js';        
		import { OrbitControls } from './js/three/examples/jsm/controls/OrbitControls.js';
		import { GLTFLoader } from './js/three/examples/jsm/loaders/GLTFLoader.js';
		import { LightProbeGenerator } from './js/three/examples/jsm/lights/LightProbeGenerator.js';
		import { RGBELoader } from './js/three/examples/jsm/loaders/RGBELoader.js';
		import { RoughnessMipmapper } from './js/three/examples/jsm/utils/RoughnessMipmapper.js';
    // import { EffectComposer } from './js/three/examples/js/postprocessing/EffectComposer.js';
    // import { RenderPass } from './js/three/examples/js/postprocessing/RenderPass.js';
    // import { UnrealBloomPass } from './js/three/examples/js/postprocessing/UnrealBloomPass.js';

		// 网页端模型展示功能
		var container;
		var camera;
		var renderer;  
		var scene = [];
    let stats;
		
		// var scenes = [scene];
		var composer;
		var controls;
		var ring;

		init();

		function init(){
			container = document.querySelector('.scene');
			// 添加场景
			scene = new THREE.Scene();
			// 添加摄像机
			const fov = 50;
			const aspect = container.clientWidth/container.clientHeight;
			const near = 0.1;
			const far = 500;

			camera = new THREE.PerspectiveCamera(fov,aspect,near,far);
			camera.position.set(0,2,5);
			 // 添加环境光
			const ambient = new THREE.AmbientLight( 0x404040 ,0.3);
            scene.add(ambient);
            const light2 = new THREE.PointLight(0xffffff,1,100);
            light2.position.set(20,-10,1);
            scene.add(light2);
            const light4 = new THREE.DirectionalLight(0xffffff,0.8 * Math.PI);
            light4.position.set(-15,10,30);
            scene.add(light4);
            
      // const bloomPass = new UnrealBloomPass( new THREE.Vector2( window.innerWidth, window.innerHeight ), 1.5, 0.4, 0.85 );

			// 添加渲染器
			renderer = new THREE.WebGLRenderer({antialias:true, alpha:true});
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            // renderer.physicallyCorrectLights = true;
            renderer.gammaOutput = true;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1;
            renderer.outputEncoding = THREE.sRGBEncoding;

			container.appendChild(renderer.domElement);


      // const bloomPass = new UnrealBloomPass( new THREE.Vector2( window.innerWidth, window.innerHeight ), 1.5, 0.4, 0.85 );
			// 	bloomPass.threshold = params.bloomThreshold;
			// 	bloomPass.strength = params.bloomStrength;
			// 	bloomPass.radius = params.bloomRadius;

			// 	composer = new EffectComposer( renderer );
			// 	composer.addPass( renderScene );
			// 	composer.addPass( bloomPass );

			// 添加HDR
			new RGBELoader()
				.setDataType( THREE.UnsignedByteType )
				.setPath( './hdr/' )
				.load( 'royal_esplanade_1k.hdr', function (texture) {
					var envMap = pmremGenerator.fromEquirectangular(texture).texture;

					// scene.background = envMap;
					scene.environment = envMap;

					texture.dispose();
					pmremGenerator.dispose();

					animate();

					// 粗糙度可选
					var roughnessMipmapper = new RoughnessMipmapper( renderer );

					// 加载GLTF模型
					var loader = new GLTFLoader().setPath('./forWeb/');
					// var filename = 'Ring_' + j + '.gltf';
          // var filename = 'eth.crystal_rock_web_test.glb';

					loader.load('Ore_main.gltf', function(gltf){
						ring = gltf.scene;
						ring.scale.set(0.2,0.2,0.2);
						ring.position.set(0,0,0);
						scene.add(gltf.scene);
						roughnessMipmapper.dispose();
					}); 

          loader.load('crystal_fly.gltf', function(gltf){
						ring = gltf.scene;
						ring.scale.set(0.2,0.2,0.2);
						ring.position.set(0,0,0);
						scene.add(gltf.scene);
						roughnessMipmapper.dispose();
					});

          loader.load('crystal_center.gltf', function(gltf){
						ring = gltf.scene;
						ring.scale.set(0.2,0.2,0.2);
						ring.position.set(0,0,0);
						scene.add(gltf.scene);
						roughnessMipmapper.dispose();
					});

          loader.load('crystal_left_bottom.gltf', function(gltf){
						ring = gltf.scene;
						ring.scale.set(0.2,0.2,0.2);
						ring.position.set(0,0,0);
						scene.add(gltf.scene);
						roughnessMipmapper.dispose();
					});

          loader.load('crystal_right_bottom.gltf', function(gltf){
						ring = gltf.scene;
						ring.scale.set(0.2,0.2,0.2);
						ring.position.set(0,0,0);
						scene.add(gltf.scene);
						roughnessMipmapper.dispose();
					});

          loader.load('crystal_right_top.gltf', function(gltf){
						ring = gltf.scene;
						ring.scale.set(0.2,0.2,0.2);
						ring.position.set(0,0,0);
						scene.add(gltf.scene);
						roughnessMipmapper.dispose();
					});

          loader.load('crystal_left_top.gltf', function(gltf){
						ring = gltf.scene;
						ring.scale.set(0.2,0.2,0.2);
						ring.position.set(0,0,0);
						scene.add(gltf.scene);
						roughnessMipmapper.dispose();
					});
				});

			var pmremGenerator = new THREE.PMREMGenerator( renderer );
			pmremGenerator.compileEquirectangularShader();
			
			// 添加控制器
			controls = new OrbitControls(camera, renderer.domElement);
			controls.screenSpacePanning = true;
			controls.autoRotate = true;
			controls.autoRotateSpeed = 4;
			controls.update();
		}

		// 鼠标操控摄像机
		function animate(){
			renderer.render(scene, camera);
			// spotLight.position.set(
			//     camera.position.x + 10,
			//     camera.position.y + 10,
			//     camera.position.z + 10
			// );
			controls.update();
			requestAnimationFrame(animate); 
			renderer.autoClear = false;
		}

		// 画布随窗口大小发生改变
		function onWindowResize(){
			camera.aspect = container.clientWidth / container.clientHeight;
			camera.updateProjectionMatrix();
			renderer.setSize(container.clientWidth, container.clientHeight);
		}

		window.addEventListener("resize", onWindowResize);
    </script>
    

</body>
</html>